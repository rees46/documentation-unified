# Список клиентов

Метод позволяет получить список всех клиентов определенной подписки.

```
GET https://api.rees46.ru/loyalty/subscriptions/members
```

## Параметры

| Параметр          | Обязателен? | Описание                                                                                                                                                                                                  |
|-------------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| shop_id           | Да          | API-ключ                                                                                                                                                                                                  |
| shop_secret       | Да          | Секретный ключ API                                                                                                                                                                                        |
| subscription      | Да          | Уникальный код подписки                                                                                                                                                                                   |
| plan              | Нет         | Уникальный код плана (тарифа), как опциональный фильтр                                                                                                                                                    |

## Запрос

Пример запроса:

```shell 
curl https://api.rees46.ru/loyalty/subscriptions/members?shop_id=...&shop_secret=...&subscription=...&plan=...
```

## Ответ

Пример ответа сервера:

```json 
{
  "success": true,
  "payload": {
    "message": "Successful request",
    "members": [
      {
        "identifier": "...",
        "subscription": "...",
        "plan": "...",
        "paid_till": "...",
        "limits_reset_date": "..."
      },
      {
        "identifier": "...",
        "subscription": "...",
        "plan": "...",
        "paid_till": "...",
        "limits_reset_date": "..."
      }
    ]
  }
}
```

:::info Обратите внимание
Список будет содержать в том числе клиентов, у которых подписка уже просрочена. Не забывайте проверять поле `paid_till`.
:::

В случае ошибки ответ будет в формате:

```json 
{
  "success": false,
  "payload": {
    "message": "API secret is not correct"
  }
}
```

Расшифровка ответа:

| Параметр                            | Описание                                                             |
|-------------------------------------|----------------------------------------------------------------------|
| success                             | Запрос выполнен успешно или нет                                      |
| payload.message                     | Сообщение с результатом обработки запроса                            |
| payload.members                     | Список клиентов на подписке (массив объектов)                        |
| payload.members[].identifier        | Идентификатор участника программы лояльности в формате `7XXXXXXXXXX` |
| payload.members[].subscription      | Уникальный код подписки                                              |
| payload.members[].plan              | Уникальный код плана                                                 |
| payload.members[].paid_till         | Дата, до которой оплачена подписка                                   |
| payload.members[].limits_reset_date | Дата, когда будет выполнен следующий сброс лимитов                   |